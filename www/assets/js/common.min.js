!function(){var e=$(".global-preloader");setTimeout(function(){e.addClass("is-logo-show")},550),$(window).on("load",function(){setTimeout(function(){e.addClass("is-content-load"),setTimeout(function(){$("body").css("overflow","visible")},1e3),(new WOW).init()},1500)})}(),$(document).ready(function(){$("#firstscreen-form").submit(function(e){e.preventDefault();var n=$(this);$.ajax({type:"POST",url:n.attr("action"),data:n.serialize(),success:function(e){$(document).click("#open-thankpopup")},error:function(e){}})}),$.ajax("http://167.99.203.107:8080/").done(function(e){$("#span_price").html(e.price)})}),$(document).ready(function(){function e(e,n){$(e).click(function(e){var i=$(this).attr("href"),t=$(i).offset().top;t<0&&(t=0),$("html, body").animate({scrollTop:t-n},"slow"),e.preventDefault()})}$(document).on("click",".hidden-for-mobile",function(e){$(".contacts__cities-container").addClass("is-active"),$(this).addClass("is-active")}),$(document).on("click",".contacts__cities-item",function(e){e.preventDefault();var n=$(this),i=n.index();n.siblings().removeClass("is-active"),n.addClass("is-active"),$(".contacts__info-container").css("display","none").eq(i).fadeIn(500),$(".hidden-for-mobile").removeClass("is-active"),$(".contacts__cities-container").removeClass("is-active")}),setTimeout(function(){$("#weather-frame").attr("src","https://www.ventusky.com/")},3500),function(){Barba.Pjax.init(),Barba.Prefetch.init(),$("body").append('<div class="page-preloader"><div class="global-preloader__under"></div></div>');var e=$(".page-preloader"),n=Barba.BaseTransition.extend({start:function(){Promise.all([this.newContainerLoading,this.showLoader()]).then(this.hideLoader.bind(this))},showLoader:function(){return e.addClass("is-page-load-start"),$(this.oldContainer).promise()},hideLoader:function(){var n=this,i=$(this.newContainer);setTimeout(function(){e.addClass("is-page-load-end"),i.animate({},400,function(){n.done()}),setTimeout(function(){e.removeClass("is-page-load-start is-page-load-end")},800),$("body").css("overflow","visible")},500)}});Barba.Dispatcher.on("newPageReady",function(e,n,i){setTimeout(function(){$.each($(".animated"),function(){$(this).removeClass("animated").removeAttr("style")}),(new WOW).init()},500),setTimeout(function(){$("#weather-frame").attr("src","https://www.ventusky.com/")},1500)}),Barba.Pjax.getTransition=function(){return n}}(),$(".f-right__show").hover(function(e){$(this).find(".f-right__dropdown").fadeIn()},function(){$(".f-right__dropdown").fadeOut()}),function(){$(document).width()>993&&($(document).on("mouseover",".header__languages",function(e){e.preventDefault(),$(this).find(".header__more-languages").fadeIn()}),$(document).on("mouseleave",".header__languages",function(e){e.preventDefault(),$(this).find(".header__more-languages").fadeOut()}))}(),$(document).on("mouseover",".hover-link",function(e){e.preventDefault(),$(this).parent().parent().addClass("is-hover")}),$(document).on("mouseleave",".hover-link",function(e){e.preventDefault(),$(this).parent().parent().removeClass("is-hover")}),$(document).ready(function(){$(document).on("click","#nav-icon2",function(){$(this).toggleClass("open"),$(".header__left-mobile").toggleClass("is-open"),$("body").css("overflow","hidden")})}),$(document).ready(function(){$(document).on("click","#nav-icon2.open",function(){$("body").css("overflow","auto")})}),$(document).ready(function(){$(document).on("click",".menu-link",function(){$("ul li a").removeClass("is-active"),$(".enter-link").removeClass("is-active"),$(".header__left-mobile").removeClass("is-open"),$("#nav-icon2").removeClass("open"),$(this).addClass("is-active")})}),$(document).ready(function(){$(document).on("click",".footer__menu-link",function(){$(".menu-link").removeClass("is-active")})}),$(document).ready(function(){$(document).on("click",".enter-link",function(){$(".header a").removeClass("is-active"),$(".header__left-mobile").removeClass("is-open"),$("#nav-icon2").removeClass("open"),$(this).addClass("is-active")})}),$(".input-login").each(function(){""!=$(this).val()&&$(this).parent().addClass("animation")}),$(".login-input").focus(function(){$(this).parent().addClass("animation animation-color")}),$(".login-input").focusout(function(){""===$(this).val()&&$(this).parent().removeClass("animation"),$(this).parent().removeClass("animation-color")}),$(document).on("click",".open-popup",function(e){e.preventDefault(),$(this).magnificPopup({removalDelay:500,callbacks:{beforeOpen:function(){this.st.mainClass=this.st.el.attr("data-effect")}},midClick:!0}).magnificPopup("open")}),function(){function e(){$(document).width()>992?($(".personal__info").hasClass("slick-initialized")&&$(".personal__info").slick("unslick"),$(".personal__image-carousel").hasClass("slick-initialized")&&$(".personal__image-carousel").slick("unslick")):($(".personal__info").hasClass("slick-initialized")||$(".personal__info").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,fade:!0,centerMode:!0,asNavFor:".personal__image-carousel"}),$(".personal__image-carousel").hasClass("slick-initialized")||$(".personal__image-carousel").slick({slidesToShow:1,slidesToScroll:1,asNavFor:".personal__info",dots:!0,focusOnSelect:!0}))}$(document).on("mouseover",".personal__link",function(e){if($(this).hasClass("is-active"));else{e.preventDefault();var n=$(this),i=n.index();n.siblings().removeClass("is-active"),n.addClass("is-active"),$(".personal__image").fadeOut().eq(i).fadeIn(400)}}),e(),$(window).resize(function(){e()})}(),$(document).on("click",'a[href="#"]',function(e){e.preventDefault()}),$(window).scroll(function(){$(window).scrollTop()+$(window).height();$(window).scrollTop()>250?$(".bottom-arrow").addClass("is-active"):$(".bottom-arrow").removeClass("is-active")});var n=$(window);!function(){$("[js-teleport]").each(function(e,i){function t(){var e;"<"===l?e=n.width()<c:">"===l&&(e=n.width()>c),e?(s.html(a),o.html("")):(o.html(a),s.html(""))}var o=$(i),a=$(i).html(),s=$("[data-teleport-target="+$(i).data("teleport-to")+"]"),c=$(i).data("teleport-condition").substring(1),l=$(i).data("teleport-condition").substring(0,1);s&&a&&l&&(t(),n.on("resize",t))})}(),function(){$(document).width()>1268?$(document).find(".enter-link").html("Увійти до кабінету"):$(document).find(".enter-link").html("Увійти"),$(window).resize(function(){$(document).width()>1268?$(document).find(".enter-link").html("Увійти до кабінету"):$(document).find(".enter-link").html("Увійти")})}(),e("a[href='#anchor']",67)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyIkcHJlbG9hZGVyIiwiJCIsInNldFRpbWVvdXQiLCJhZGRDbGFzcyIsIndpbmRvdyIsIm9uIiwiY3NzIiwiV09XIiwiaW5pdCIsImRvY3VtZW50IiwicmVhZHkiLCJzdWJtaXQiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiJGZvcm0iLCJ0aGlzIiwiYWpheCIsInR5cGUiLCJ1cmwiLCJhdHRyIiwiZGF0YSIsInNlcmlhbGl6ZSIsInN1Y2Nlc3MiLCJjbGljayIsImVycm9yIiwiZG9uZSIsImh0bWwiLCJwcmljZSIsInNjcm9sbFRvRWxlbWVudCIsImVsZW1lbnQiLCJvZmZzZXQiLCJlIiwiZWxlbWVudENsaWNrIiwiZGVzdGluYXRpb24iLCJ0b3AiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwiJHNlbGYiLCJ0YWJJbmRleCIsImluZGV4Iiwic2libGluZ3MiLCJyZW1vdmVDbGFzcyIsImVxIiwiZmFkZUluIiwiQmFyYmEiLCJQamF4IiwiUHJlZmV0Y2giLCJhcHBlbmQiLCIkcGFnZVByZWxvYWRlciIsIkZhZGVUcmFuc2l0aW9uIiwiQmFzZVRyYW5zaXRpb24iLCJleHRlbmQiLCJzdGFydCIsIlByb21pc2UiLCJhbGwiLCJuZXdDb250YWluZXJMb2FkaW5nIiwic2hvd0xvYWRlciIsInRoZW4iLCJoaWRlTG9hZGVyIiwiYmluZCIsIm9sZENvbnRhaW5lciIsInByb21pc2UiLCJfdGhpcyIsIiRlbCIsIm5ld0NvbnRhaW5lciIsIkRpc3BhdGNoZXIiLCJjdXJyZW50U3RhdHVzIiwib2xkU3RhdHVzIiwiY29udGFpbmVyIiwiZWFjaCIsInJlbW92ZUF0dHIiLCJnZXRUcmFuc2l0aW9uIiwiaG92ZXIiLCJmaW5kIiwiZmFkZU91dCIsIndpZHRoIiwicGFyZW50IiwidG9nZ2xlQ2xhc3MiLCJ2YWwiLCJmb2N1cyIsImZvY3Vzb3V0IiwibWFnbmlmaWNQb3B1cCIsInJlbW92YWxEZWxheSIsImNhbGxiYWNrcyIsImJlZm9yZU9wZW4iLCJzdCIsIm1haW5DbGFzcyIsImVsIiwibWlkQ2xpY2siLCJwZXJzb25hbEluZm9TbGlkZXJJbml0IiwiaGFzQ2xhc3MiLCJzbGljayIsInNsaWRlc1RvU2hvdyIsInNsaWRlc1RvU2Nyb2xsIiwiYXJyb3dzIiwiZmFkZSIsImNlbnRlck1vZGUiLCJhc05hdkZvciIsImRvdHMiLCJmb2N1c09uU2VsZWN0IiwicmVzaXplIiwic2Nyb2xsIiwiaGVpZ2h0IiwiX3dpbmRvdyIsImkiLCJ0ZWxlcG9ydCIsImNvbmRpdGlvbiIsImNvbmRpdGlvblBvc2l0aW9uIiwiY29uZGl0aW9uTWVkaWEiLCJ0YXJnZXQiLCJvYmpIdG1sIiwic2VsZiIsInN1YnN0cmluZyJdLCJtYXBwaW5ncyI6IkNBQUEsV0FFSSxHQUFJQSxHQUFhQyxFQUFFLG9CQUVuQkMsWUFBVyxXQUNQRixFQUFXRyxTQUFTLGlCQUNyQixLQUVIRixFQUFFRyxRQUFRQyxHQUFHLE9BQVEsV0FDakJILFdBQVcsV0FDUEYsRUFBV0csU0FBUyxtQkFFcEJELFdBQVcsV0FFUEQsRUFBRSxRQUFRSyxJQUFJLFdBQVksWUFDM0IsTUFFSCxHQUFJQyxNQUFNQyxRQUVYLFdBS1hQLEVBQUVRLFVBQVVDLE1BQU0sV0FFZFQsRUFBRSxxQkFBcUJVLE9BQU8sU0FBU0MsR0FDbkNBLEVBQU1DLGdCQUNOLElBQUlDLEdBQVFiLEVBQUVjLEtBRWRkLEdBQUVlLE1BQ0VDLEtBQU0sT0FDTkMsSUFBS0osRUFBTUssS0FBSyxVQUNoQkMsS0FBTU4sRUFBTU8sWUFDWkMsUUFBUyxTQUFTRixHQUNkbkIsRUFBRVEsVUFBVWMsTUFBTSxxQkFFdEJDLE1BQU8sU0FBU0EsU0FjeEJ2QixFQUFFZSxLQUFLLCtCQUErQlMsS0FBSyxTQUFTTCxHQUFRbkIsRUFBRSxlQUFleUIsS0FBS04sRUFBS08sV0FpQjNGMUIsRUFBRVEsVUFBVUMsTUFBTSxXQXFUZCxRQUFTa0IsR0FBZ0JDLEVBQVNDLEdBQzlCN0IsRUFBRTRCLEdBQVNOLE1BQU0sU0FBU1EsR0FDdEIsR0FBSUMs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IihmdW5jdGlvbigpIHtcblxuICAgIHZhciAkcHJlbG9hZGVyID0gJCgnLmdsb2JhbC1wcmVsb2FkZXInKTtcblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICRwcmVsb2FkZXIuYWRkQ2xhc3MoJ2lzLWxvZ28tc2hvdycpO1xuICAgIH0sIDU1MCk7XG5cbiAgICAkKHdpbmRvdykub24oJ2xvYWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRwcmVsb2FkZXIuYWRkQ2xhc3MoJ2lzLWNvbnRlbnQtbG9hZCcpO1xuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIC8vICRwcmVsb2FkZXIucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCAndmlzaWJsZScpO1xuICAgICAgICAgICAgfSwgMTAwMCk7XG5cbiAgICAgICAgICAgIG5ldyBXT1coKS5pbml0KCk7XG5cbiAgICAgICAgfSwgMTUwMCk7XG4gICAgfSk7XG59KSgpO1xuXG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gICAgJCgnI2ZpcnN0c2NyZWVuLWZvcm0nKS5zdWJtaXQoZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyICRmb3JtID0gJCh0aGlzKTtcblxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgdXJsOiAkZm9ybS5hdHRyKCdhY3Rpb24nKSxcbiAgICAgICAgICAgIGRhdGE6ICRmb3JtLnNlcmlhbGl6ZSgpLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLmNsaWNrKCcjb3Blbi10aGFua3BvcHVwJyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgLy8gRG8gc29tZXRoaW5nIHdpdGggdGhlIGVycm9yXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gJCgnI2lkb2Z0aGVidXR0b24nKS5tYWduaWZpY1BvcHVwKHtcbiAgICAvLyAgICAgaXRlbXM6IHtcbiAgICAvLyAgICAgICAgIHNyYzogKCc8ZGl2PkR5bmFtaWNhbGx5IGNyZWF0ZWQgZWxlbWVudDwvZGl2PicpLFxuICAgIC8vICAgICAgICAgdHlwZTogJ2lubGluZSdcbiAgICAvLyAgICAgfSxcbiAgICAvLyAgICAgY2xvc2VCdG5JbnNpZGU6IHRydWVcbiAgICAvLyB9KTtcblxuICAgICQuYWpheCgnaHR0cDovLzE2Ny45OS4yMDMuMTA3OjgwODAvJykuZG9uZShmdW5jdGlvbihkYXRhKSB7ICQoJyNzcGFuX3ByaWNlJykuaHRtbChkYXRhLnByaWNlKSB9KTtcblxuICAgIC8vIHZhciBwcmljZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc3Bhbl9wcmljZVwiKTtcbiAgICAvLyAvLyAgIG1ha2UgdGhlIHJlcXVlc3RcbiAgICAvLyB2YXIgWEhSID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAvLyBYSFIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gICAgIGlmIChYSFIucmVhZHlTdGF0ZSA9PSA0ICYmIFhIUi5zdGF0dXMgPT0gMjAwKSB7XG4gICAgLy8gICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoWEhSLnJlc3BvbnNlVGV4dCkucHJpY2U7XG4gICAgLy8gICAgICAgICBwcmljZS5pbm5lckhUTUwgPSBkYXRhO1xuICAgIC8vICAgICB9XG4gICAgLy8gfVxuXG4gICAgLy8gWEhSLm9wZW4oXCJHRVRcIiwgXCJodHRwOi8vMTY3Ljk5LjIwMy4xMDc6ODA4MFwiKTtcbiAgICAvLyBYSFIuc2VuZCgpO1xufSk7XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG5cbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmhpZGRlbi1mb3ItbW9iaWxlJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAkKCcuY29udGFjdHNfX2NpdGllcy1jb250YWluZXInKS5hZGRDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgIH0pO1xuXG5cblxuXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5jb250YWN0c19fY2l0aWVzLWl0ZW0nLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyICRzZWxmID0gJCh0aGlzKSxcbiAgICAgICAgICAgIHRhYkluZGV4ID0gJHNlbGYuaW5kZXgoKTtcbiAgICAgICAgJHNlbGYuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgICRzZWxmLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgJCgnLmNvbnRhY3RzX19pbmZvLWNvbnRhaW5lcicpLmNzcygnZGlzcGxheScsICdub25lJykuZXEodGFiSW5kZXgpLmZhZGVJbig1MDApO1xuICAgICAgICAkKCcuaGlkZGVuLWZvci1tb2JpbGUnKS5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgICQoJy5jb250YWN0c19fY2l0aWVzLWNvbnRhaW5lcicpLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICB9KTtcblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJyN3ZWF0aGVyLWZyYW1lJykuYXR0cignc3JjJywgJ2h0dHBzOi8vd3d3LnZlbnR1c2t5LmNvbS8nKTtcbiAgICB9LCAzNTAwKTtcblxuICAgIC8vIEJBUkJBLkpTXG4gICAgKGZ1bmN0aW9uKCkge1xuICAgICAgICAvL1BsZWFzZSBub3RlLCB0aGUgRE9NIHNob3VsZCBiZSByZWFkeVxuICAgICAgICBCYXJiYS5QamF4LmluaXQoKTtcbiAgICAgICAgQmFyYmEuUHJlZmV0Y2guaW5pdCgpO1xuXG4gICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJwYWdlLXByZWxvYWRlclwiPjxkaXYgY2xhc3M9XCJnbG9iYWwtcHJlbG9hZGVyX191bmRlclwiPjwvZGl2PjwvZGl2PicpO1xuICAgICAgICB2YXIgJHBhZ2VQcmVsb2FkZXIgPSAkKCcucGFnZS1wcmVsb2FkZXInKTtcblxuICAgICAgICB2YXIgRmFkZVRyYW5zaXRpb24gPSBCYXJiYS5CYXNlVHJhbnNpdGlvbi5leHRlbmQoe1xuICAgICAgICAgICAgc3RhcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIFByb21pc2VcbiAgICAgICAgICAgICAgICAgICAgLmFsbChbdGhpcy5uZXdDb250YWluZXJMb2FkaW5nLCB0aGlzLnNob3dMb2FkZXIoKV0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKHRoaXMuaGlkZUxvYWRlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHNob3dMb2FkZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICRwYWdlUHJlbG9hZGVyLmFkZENsYXNzKCdpcy1wYWdlLWxvYWQtc3RhcnQnKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMub2xkQ29udGFpbmVyKS5wcm9taXNlKCk7XG5cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGhpZGVMb2FkZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICAgICAgdmFyICRlbCA9ICQodGhpcy5uZXdDb250YWluZXIpO1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgJHBhZ2VQcmVsb2FkZXIuYWRkQ2xhc3MoJ2lzLXBhZ2UtbG9hZC1lbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgLy8g0KbQlSDQotCe0JHQhiDQndCVINCd0JDQlNCQXG4gICAgICAgICAgICAgICAgICAgICRlbC5hbmltYXRlKHt9LCA0MDAsIGZ1bmN0aW9uKCkgeyBfdGhpcy5kb25lKCk7IH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkcGFnZVByZWxvYWRlci5yZW1vdmVDbGFzcygnaXMtcGFnZS1sb2FkLXN0YXJ0IGlzLXBhZ2UtbG9hZC1lbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vINCS0YDQtdC80Y8g0YDQtdGE0YDQtdGI0LAg0L/RgNC10LvQvtCw0LTQtdGA0LBcbiAgICAgICAgICAgICAgICAgICAgfSwgODAwKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyDQktGA0LXQvNGPINC40YHRh9C10LfQvdC+0LLQtdC90LjRjyDQv9GA0LXQu9C+0LDQtNC10YDQsFxuICAgICAgICAgICAgICAgICAgICAkKCdib2R5JykuY3NzKCdvdmVyZmxvdycsICd2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIEJhcmJhLkRpc3BhdGNoZXIub24oJ25ld1BhZ2VSZWFkeScsIGZ1bmN0aW9uKGN1cnJlbnRTdGF0dXMsIG9sZFN0YXR1cywgY29udGFpbmVyKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQuZWFjaCgkKCcuYW5pbWF0ZWQnKSwgZnVuY3Rpb24oKSB7ICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkJykucmVtb3ZlQXR0cignc3R5bGUnKTsgfSk7XG4gICAgICAgICAgICAgICAgbmV3IFdPVygpLmluaXQoKTtcblxuICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCgnI3dlYXRoZXItZnJhbWUnKS5hdHRyKCdzcmMnLCAnaHR0cHM6Ly93d3cudmVudHVza3kuY29tLycpO1xuICAgICAgICAgICAgfSwgMTUwMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIEJhcmJhLlBqYXguZ2V0VHJhbnNpdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIEZhZGVUcmFuc2l0aW9uO1xuICAgICAgICB9O1xuICAgIH0pKCk7XG5cbiAgICAkKCcuZi1yaWdodF9fc2hvdycpLmhvdmVyKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICQodGhpcykuZmluZCgnLmYtcmlnaHRfX2Ryb3Bkb3duJykuZmFkZUluKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnLmYtcmlnaHRfX2Ryb3Bkb3duJykuZmFkZU91dCgpO1xuICAgICAgICB9KTtcblxuICAgIChmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCQoZG9jdW1lbnQpLndpZHRoKCkgPiA5OTMpIHtcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZW92ZXInLCAnLmhlYWRlcl9fbGFuZ3VhZ2VzJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5oZWFkZXJfX21vcmUtbGFuZ3VhZ2VzJykuZmFkZUluKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZWxlYXZlJywgJy5oZWFkZXJfX2xhbmd1YWdlcycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuaGVhZGVyX19tb3JlLWxhbmd1YWdlcycpLmZhZGVPdXQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge31cbiAgICB9KSgpO1xuXG4gICAgJChkb2N1bWVudCkub24oJ21vdXNlb3ZlcicsICcuaG92ZXItbGluaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmFkZENsYXNzKCdpcy1ob3ZlcicpO1xuICAgIH0pO1xuICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZWxlYXZlJywgJy5ob3Zlci1saW5rJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICQodGhpcykucGFyZW50KCkucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ2lzLWhvdmVyJyk7XG4gICAgfSk7XG5cbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNuYXYtaWNvbjInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ29wZW4nKTtcbiAgICAgICAgICAgICQoJy5oZWFkZXJfX2xlZnQtbW9iaWxlJykudG9nZ2xlQ2xhc3MoJ2lzLW9wZW4nKTtcbiAgICAgICAgICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNuYXYtaWNvbjIub3BlbicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCAnYXV0bycpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLm1lbnUtbGluaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgndWwgbGkgYScpLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgICAgICQoJy5lbnRlci1saW5rJykucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgICAgICAgICAgJCgnLmhlYWRlcl9fbGVmdC1tb2JpbGUnKS5yZW1vdmVDbGFzcygnaXMtb3BlbicpO1xuICAgICAgICAgICAgJCgnI25hdi1pY29uMicpLnJlbW92ZUNsYXNzKCdvcGVuJyk7XG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5mb290ZXJfX21lbnUtbGluaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnLm1lbnUtbGluaycpLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5lbnRlci1saW5rJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCcuaGVhZGVyIGEnKS5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgICAgICAkKCcuaGVhZGVyX19sZWZ0LW1vYmlsZScpLnJlbW92ZUNsYXNzKCdpcy1vcGVuJyk7XG4gICAgICAgICAgICAkKCcjbmF2LWljb24yJykucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIFdPV1xuXG4gICAgLy8gbmV3IFdPVygpLmluaXQoKTtcblxuXG4gICAgJChcIi5pbnB1dC1sb2dpblwiKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoJCh0aGlzKS52YWwoKSAhPSBcIlwiKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKFwiYW5pbWF0aW9uXCIpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAkKFwiLmxvZ2luLWlucHV0XCIpLmZvY3VzKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKFwiYW5pbWF0aW9uIGFuaW1hdGlvbi1jb2xvclwiKTtcbiAgICB9KTtcblxuICAgICQoXCIubG9naW4taW5wdXRcIikuZm9jdXNvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkKHRoaXMpLnZhbCgpID09PSBcIlwiKVxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyhcImFuaW1hdGlvblwiKTtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyhcImFuaW1hdGlvbi1jb2xvclwiKTtcbiAgICB9KTtcblxuICAgIC8vIElubGluZSBwb3B1cHNcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLm9wZW4tcG9wdXAnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAkKHRoaXMpLm1hZ25pZmljUG9wdXAoe1xuICAgICAgICAgICAgcmVtb3ZhbERlbGF5OiA1MDAsIC8vZGVsYXkgcmVtb3ZhbCBieSBYIHRvIGFsbG93IG91dC1hbmltYXRpb25cbiAgICAgICAgICAgIGNhbGxiYWNrczoge1xuICAgICAgICAgICAgICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0Lm1haW5DbGFzcyA9IHRoaXMuc3QuZWwuYXR0cignZGF0YS1lZmZlY3QnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWlkQ2xpY2s6IHRydWVcbiAgICAgICAgfSkubWFnbmlmaWNQb3B1cCgnb3BlbicpO1xuICAgIH0pO1xuXG4gICAgKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRvY3VtZW50KS5vbignbW91c2VvdmVyJywgJy5wZXJzb25hbF9fbGluaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdpcy1hY3RpdmUnKSkge30gZWxzZSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHZhciAkc2VsZiA9ICQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgIHRhYkluZGV4ID0gJHNlbGYuaW5kZXgoKTtcbiAgICAgICAgICAgICAgICAkc2VsZi5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAkc2VsZi5hZGRDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgJCgnLnBlcnNvbmFsX19pbWFnZScpLmZhZGVPdXQoKS5lcSh0YWJJbmRleCkuZmFkZUluKDQwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIHBlcnNvbmFsSW5mb1NsaWRlckluaXQoKSB7XG5cbiAgICAgICAgICAgIGlmICgkKGRvY3VtZW50KS53aWR0aCgpID4gOTkyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCQoJy5wZXJzb25hbF9faW5mbycpLmhhc0NsYXNzKCdzbGljay1pbml0aWFsaXplZCcpKVxuICAgICAgICAgICAgICAgICAgICAkKCcucGVyc29uYWxfX2luZm8nKS5zbGljaygndW5zbGljaycpO1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgaWYgKCQoJy5wZXJzb25hbF9faW1hZ2UtY2Fyb3VzZWwnKS5oYXNDbGFzcygnc2xpY2staW5pdGlhbGl6ZWQnKSlcbiAgICAgICAgICAgICAgICAgICAgJCgnLnBlcnNvbmFsX19pbWFnZS1jYXJvdXNlbCcpLnNsaWNrKCd1bnNsaWNrJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghJCgnLnBlcnNvbmFsX19pbmZvJykuaGFzQ2xhc3MoJ3NsaWNrLWluaXRpYWxpemVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnBlcnNvbmFsX19pbmZvJykuc2xpY2soe1xuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJvd3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmFkZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlck1vZGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhc05hdkZvcjogJy5wZXJzb25hbF9faW1hZ2UtY2Fyb3VzZWwnLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoISQoJy5wZXJzb25hbF9faW1hZ2UtY2Fyb3VzZWwnKS5oYXNDbGFzcygnc2xpY2staW5pdGlhbGl6ZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICAkKCcucGVyc29uYWxfX2ltYWdlLWNhcm91c2VsJykuc2xpY2soe1xuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBhc05hdkZvcjogJy5wZXJzb25hbF9faW5mbycsXG4gICAgICAgICAgICAgICAgICAgICAgICBkb3RzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNPblNlbGVjdDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgcGVyc29uYWxJbmZvU2xpZGVySW5pdCgpO1xuXG4gICAgICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBwZXJzb25hbEluZm9TbGlkZXJJbml0KCk7XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnYVtocmVmPVwiI1wiXScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHNjcm9sbEJvdHRvbSA9ICQod2luZG93KS5zY3JvbGxUb3AoKSArICQod2luZG93KS5oZWlnaHQoKTtcbiAgICAgICAgaWYgKCQod2luZG93KS5zY3JvbGxUb3AoKSA+IDI1MCkge1xuICAgICAgICAgICAgJCgnLmJvdHRvbS1hcnJvdycpLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoJy5ib3R0b20tYXJyb3cnKS5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vLy8vLy8vLy8vL1xuICAgIC8vIFRFTEVQT1JUIFBMVUdJTlxuICAgIC8vLy8vLy8vLy8vL1xuXG4gICAgdmFyIF93aW5kb3cgPSAkKHdpbmRvdyk7XG5cbiAgICAoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJ1tqcy10ZWxlcG9ydF0nKS5lYWNoKGZ1bmN0aW9uKGksIHZhbCkge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSAkKHZhbClcbiAgICAgICAgICAgIHZhciBvYmpIdG1sID0gJCh2YWwpLmh0bWwoKTtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSAkKCdbZGF0YS10ZWxlcG9ydC10YXJnZXQ9JyArICQodmFsKS5kYXRhKCd0ZWxlcG9ydC10bycpICsgJ10nKTtcbiAgICAgICAgICAgIHZhciBjb25kaXRpb25NZWRpYSA9ICQodmFsKS5kYXRhKCd0ZWxlcG9ydC1jb25kaXRpb24nKS5zdWJzdHJpbmcoMSk7XG4gICAgICAgICAgICB2YXIgY29uZGl0aW9uUG9zaXRpb24gPSAkKHZhbCkuZGF0YSgndGVsZXBvcnQtY29uZGl0aW9uJykuc3Vic3RyaW5nKDAsIDEpO1xuXG4gICAgICAgICAgICBpZiAodGFyZ2V0ICYmIG9iakh0bWwgJiYgY29uZGl0aW9uUG9zaXRpb24pIHtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHRlbGVwb3J0KCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZGl0aW9uO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25kaXRpb25Qb3NpdGlvbiA9PT0gXCI8XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbiA9IF93aW5kb3cud2lkdGgoKSA8IGNvbmRpdGlvbk1lZGlhO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbmRpdGlvblBvc2l0aW9uID09PSBcIj5cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uID0gX3dpbmRvdy53aWR0aCgpID4gY29uZGl0aW9uTWVkaWE7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZGl0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuaHRtbChvYmpIdG1sKVxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5odG1sKCcnKVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5odG1sKG9iakh0bWwpXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuaHRtbChcIlwiKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGVsZXBvcnQoKTtcbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCdyZXNpemUnLCAodGVsZXBvcnQpKTtcblxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAoZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkKGRvY3VtZW50KS53aWR0aCgpID4gMTI2OCkge1xuICAgICAgICAgICAgJChkb2N1bWVudCkuZmluZCgnLmVudGVyLWxpbmsnKS5odG1sKCfQo9Cy0ZbQudGC0Lgg0LTQviDQutCw0LHRltC90LXRgtGDJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKGRvY3VtZW50KS5maW5kKCcuZW50ZXItbGluaycpLmh0bWwoJ9Cj0LLRltC50YLQuCcpO1xuICAgICAgICB9XG4gICAgICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoJChkb2N1bWVudCkud2lkdGgoKSA+IDEyNjgpIHtcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5maW5kKCcuZW50ZXItbGluaycpLmh0bWwoJ9Cj0LLRltC50YLQuCDQtNC+INC60LDQsdGW0L3QtdGC0YMnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkuZmluZCgnLmVudGVyLWxpbmsnKS5odG1sKCfQo9Cy0ZbQudGC0LgnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIGZ1bmN0aW9uIHNjcm9sbFRvRWxlbWVudChlbGVtZW50LCBvZmZzZXQpIHtcbiAgICAgICAgJChlbGVtZW50KS5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudENsaWNrID0gJCh0aGlzKS5hdHRyKFwiaHJlZlwiKTtcbiAgICAgICAgICAgIHZhciBkZXN0aW5hdGlvbiA9ICQoZWxlbWVudENsaWNrKS5vZmZzZXQoKS50b3A7XG4gICAgICAgICAgICBpZiAoZGVzdGluYXRpb24gPCAwKSB7IGRlc3RpbmF0aW9uID0gMDsgfVxuICAgICAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoeyBzY3JvbGxUb3A6IGRlc3RpbmF0aW9uIC0gb2Zmc2V0IH0sIFwic2xvd1wiKTtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNjcm9sbFRvRWxlbWVudChcImFbaHJlZj0nI2FuY2hvciddXCIsIDY3KTtcblxufSk7Il19
